

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Avoiding Common Problems with Smart Pointers &mdash; BDE Documentation  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/bde.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="BDE FAQ" href="../knowledge_base/faq.html" />
    <link rel="prev" title="Articles" href="index.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> BDE Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../news/news.html">BDE News</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../news/news.html#avoiding-common-problems-with-smart-pointers">Avoiding Common Problems with Smart Pointers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news/news.html#bde-coding-standards-update">BDE Coding Standards Update</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Library Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../library_information/documentation.html">Documentation</a><ul>
<li class="toctree-l2"><a class="reference external" href="http://bloomberg.github.com/bde-resources/doxygen/bde_api_prod">API Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://bloomberg.github.io/bde-tools/">Build Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../library_information/build.html">Build Instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../library_information/build.html#linux-macos">Linux &amp; MacOS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#download-bde-tools">Download BDE tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#download-bde-library">Download BDE library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#set-build-environment">Set build environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#configure-build-and-install-bde">Configure, build and install BDE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#create-an-application">Create an application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#plain-cmake-build">Plain CMake build</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library_information/build.html#windows">Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#id1">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#id4">Download BDE tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#id5">Set build environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#id6">Configure, build and install BDE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/build.html#id8">Plain CMake build</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../library_information/source_code.html">Source Code</a><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/bloomberg/bde">Core Libraries</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/bloomberg/bde-tools">Build Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../library_information/supported_platforms.html">Supported Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../library_information/supported_platforms.html#current-minimum-compilers-supported">Current Minimum Compilers Supported</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library_information/supported_platforms.html#tiers-of-support">Tiers of Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library_information/supported_platforms.html#tier-1-bloomberg-production-platforms">Tier 1: Bloomberg Production Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library_information/supported_platforms.html#tier-2-actively-supported-platforms">Tier 2: Actively Supported Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library_information/supported_platforms.html#tier-3-user-supported-platforms">Tier 3: User Supported Platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library_information/supported_platforms.html#supported-compiler-versions">Supported Compiler Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library_information/supported_platforms.html#current-test-matrix">Current Test Matrix</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes/release_notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.61.0.html">BDE 3.61.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.61.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.61.0.html#bde-3-61-0-highlights">BDE 3.61.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.61.0.html#new-style-of-allocator-aware-component-interface-being-gradually-introduced">New style of Allocator-Aware Component Interface Being Gradually Introduced</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.61.0.html#baljsn-datumutil-decode-methods-now-support-depth-limiting"><code class="docutils literal notranslate"><span class="pre">baljsn::DatumUtil::decode</span></code> methods now support depth-limiting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.61.0.html#baljsn-datumutil-behavior-w-r-t-duplicate-map-keys-clarified"><code class="docutils literal notranslate"><span class="pre">baljsn::DatumUtil</span></code> behavior w.r.t. duplicate map keys clarified</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.61.0.html#fixed-requests-3-61-0">Fixed requests: 3.61.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.60.0.html">BDE 3.60.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.60.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.60.0.html#bde-3-60-0-highlights">BDE 3.60.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.60.0.html#bde-cmake-modules-now-require-cmake-3-15-or-better">BDE <code class="docutils literal notranslate"><span class="pre">CMake</span></code> modules now require <code class="docutils literal notranslate"><span class="pre">CMake</span></code> 3.15 or better</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.60.0.html#support-for-split-test-drivers">Support for split test drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.60.0.html#balxml-and-baljsn-decoders-can-now-optionally-detect-invalid-utf-8"><code class="docutils literal notranslate"><span class="pre">balxml</span></code> and <code class="docutils literal notranslate"><span class="pre">baljsn</span></code> decoders can now optionally detect invalid <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.60.0.html#fixed-requests-3-60-0">Fixed requests: 3.60.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.59.0.html">BDE 3.59.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.59.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.59.0.html#bde-3-59-0-highlights">BDE 3.59.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.59.0.html#bsl-string-view-is-now-std-string-view-in-c-17-builds"><code class="docutils literal notranslate"><span class="pre">bsl::string_view</span></code> is now <code class="docutils literal notranslate"><span class="pre">std::string_view</span></code> in <code class="docutils literal notranslate"><span class="pre">C++17</span></code> Builds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.59.0.html#some-bdlde-utf8util-methods-deprecated-and-renamed">Some <code class="docutils literal notranslate"><span class="pre">bdlde::Utf8Util</span></code> methods deprecated and renamed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.59.0.html#fixed-requests-3-59-0">Fixed requests: 3.59.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.58.0.html">BDE 3.58.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.58.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.58.0.html#bde-3-58-0-highlights">BDE 3.58.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.58.0.html#using-sanitizers">Using sanitizers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.58.0.html#all-of-any-of-and-none-of-now-available-in-c-03"><code class="docutils literal notranslate"><span class="pre">all_of</span></code>, <code class="docutils literal notranslate"><span class="pre">any_of</span></code>, and <code class="docutils literal notranslate"><span class="pre">none_of</span></code> now available in C++03</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.58.0.html#fluent-interface-for-bslmt-threadattributes">Fluent interface for <code class="docutils literal notranslate"><span class="pre">bslmt::ThreadAttributes</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.58.0.html#fixed-requests-3-58-0">Fixed requests: 3.58.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.57.0.html">BDE 3.57.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.57.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.57.0.html#bde-3-57-0-highlights">BDE 3.57.0 Highlights</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.57.0.html#fixed-requests-3-57-0">Fixed requests: 3.57.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.56.0.html">BDE 3.56.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.56.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.56.0.html#bde-3-56-0-highlights">BDE 3.56.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.56.0.html#bdlma-aligningallocator-changes"><code class="docutils literal notranslate"><span class="pre">bdlma::AligningAllocator</span> <span class="pre">Changes</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.56.0.html#fixed-requests-3-56-0">Fixed requests: 3.56.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.55.0.html">BDE 3.55.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.55.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.55.0.html#bde-3-55-0-highlights">BDE 3.55.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.55.0.html#ber-codec-changes"><code class="docutils literal notranslate"><span class="pre">BER</span> <span class="pre">Codec</span> <span class="pre">Changes</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.55.0.html#fixed-requests-3-55-0">Fixed requests: 3.55.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.54.0.html">BDE 3.54.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.54.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.54.0.html#bde-3-54-0-highlights">BDE 3.54.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.54.0.html#bug-fix-for-bde-json-encoder"><code class="docutils literal notranslate"><span class="pre">Bug</span> <span class="pre">Fix</span> <span class="pre">for</span> <span class="pre">BDE</span> <span class="pre">JSON</span> <span class="pre">Encoder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.54.0.html#fixed-requests-3-54-0">Fixed requests: 3.54.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.53.0.html">BDE 3.53.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.53.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.53.0.html#bde-3-53-0-highlights">BDE 3.53.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.53.0.html#bdlbb-blobutil-padtoalignment-new-utility-function"><code class="docutils literal notranslate"><span class="pre">bdlbb::BlobUtil::padToAlignment</span></code>: New Utility Function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.53.0.html#fixed-requests-3-53-0">Fixed requests: 3.53.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.52.0.html">BDE 3.52.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.52.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.52.0.html#bde-3-52-0-highlights">BDE 3.52.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.52.0.html#bsls-stackaddressutil-windows-thread-safety-fix"><code class="docutils literal notranslate"><span class="pre">bsls_stackaddressutil</span></code>: Windows thread-safety fix</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.52.0.html#fixed-requests-3-52-0">Fixed requests: 3.52.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.51.0.html">BDE 3.51.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.51.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.51.0.html#bde-3-51-0-highlights">BDE 3.51.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.51.0.html#bdlma-fixes-for-very-large-allocations"><code class="docutils literal notranslate"><span class="pre">bdlma</span></code>: Fixes for very large allocations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.51.0.html#fixed-requests-3-51-0">Fixed requests: 3.51.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/BDE_3.50.0.html">BDE 3.50.0: Production Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.50.0.html#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.50.0.html#bde-3-50-0-highlights">BDE 3.50.0 Highlights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.50.0.html#bsls-spinlock-once-again-a-spin-lock"><code class="docutils literal notranslate"><span class="pre">bsls::SpinLock</span></code>: Once again a spin-lock</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/BDE_3.50.0.html#libbos-dev-removed"><code class="docutils literal notranslate"><span class="pre">libbos-dev</span></code> Removed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/BDE_3.50.0.html#fixed-requests-3-50-0">Fixed requests: 3.50.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/archive/release_notes.html">Archived Release Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.49.0.html">BDE 3.49.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.49.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.49.0.html#bde-3-49-0-highlights">BDE 3.49.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.49.0.html#fixed-requests-3-49-0">Fixed requests: 3.49.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.48.1.html">BDE 3.48.1: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.48.1.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.48.1.html#bde-3-48-1-highlights">BDE 3.48.1 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.48.1.html#fixed-requests-3-48-1">Fixed requests: 3.48.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.47.0.html">BDE 3.47.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.47.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.47.0.html#bde-3-47-0-highlights">BDE 3.47.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.47.0.html#fixed-requests-3-47-0">Fixed requests: 3.47.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.46.2.html">BDE 3.46.2: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.46.2.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.46.2.html#bde-3-46-2-highlights">BDE 3.46.2 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.46.2.html#fixed-requests-3-46-2">Fixed requests: 3.46.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.46.1.html">BDE 3.46.1: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.46.1.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.46.1.html#bde-3-46-1-highlights">BDE 3.46.1 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.46.1.html#fixed-requests-3-46-1">Fixed requests: 3.46.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.46.0.html">BDE 3.46.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.46.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.46.0.html#bde-3-46-0-highlights">BDE 3.46.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.46.0.html#fixed-requests-3-46-0">Fixed requests: 3.46.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.45.2.html">BDE 3.45.2: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.45.2.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.45.2.html#bde-3-45-2-highlights">BDE 3.45.2 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.45.0.html">BDE 3.45.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.45.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.45.0.html#bde-3-45-0-highlights">BDE 3.45.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.45.0.html#fixed-requests-3-45-0">Fixed requests: 3.45.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.44.0.html">BDE 3.44.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.44.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.44.0.html#bde-3-44-0-highlights">BDE 3.44.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.44.0.html#fixed-requests-3-44-0">Fixed requests: 3.44.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.42.0.html">BDE 3.42.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.42.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.42.0.html#bde-3-42-0-highlights">BDE 3.42.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.42.0.html#fixed-requests-3-42-0">Fixed requests: 3.42.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.41.0.html">BDE 3.41.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.41.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.41.0.html#bde-3-41-0-highlights">BDE 3.41.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.41.0.html#fixed-requests-3-41-0">Fixed requests: 3.41.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.40.0.html">BDE 3.40.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.40.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.40.0.html#bde-3-40-0-highlights">BDE 3.40.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.40.0.html#fixed-requests-3-40-0">Fixed requests: 3.40.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.39.0.html">BDE 3.39.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.39.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.39.0.html#bde-3-39-0-highlights">BDE 3.39.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.39.0.html#fixed-requests-3-39-0">Fixed requests: 3.39.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.38.0.html">BDE 3.38.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.38.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.38.0.html#bde-3-38-0-highlights">BDE 3.38.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.38.0.html#fixed-requests-3-38-0">Fixed requests: 3.38.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.37.1.html">BDE 3.37.1: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.37.1.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.37.1.html#bde-3-37-1-highlights">BDE 3.37.1 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.37.1.html#fixed-requests-3-37-1">Fixed requests: 3.37.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.36.0.html">BDE 3.36.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.36.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.36.0.html#bde-3-36-0-highlights">BDE 3.36.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.36.0.html#fixed-requests-3-36-0">Fixed requests: 3.36.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.35.0.html">BDE 3.35.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.35.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.35.0.html#bde-3-35-0-highlights">BDE 3.35.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.35.0.html#fixed-requests-3-35-0">Fixed requests: 3.35.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.34.0.html">BDE 3.34.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.34.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.34.0.html#bde-3-34-0-highlights">BDE 3.34.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.34.0.html#fixed-requests-3-34-0">Fixed requests: 3.34.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.33.1.html">BDE 3.33.1: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.33.1.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.33.1.html#bde-3-33-1-highlights">BDE 3.33.1 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.33.1.html#fixed-requests-3-33-0">Fixed requests: 3.33.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.32.0.html">BDE 3.32.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.32.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.32.0.html#bde-3-32-0-highlights">BDE 3.32.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.32.0.html#fixed-requests-3-32-0">Fixed requests: 3.32.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.31.0.html">BDE 3.31.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.31.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.31.0.html#bde-3-31-0-highlights">BDE 3.31.0 Highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.31.0.html#fixed-requests-3-31-0">Fixed requests: 3.31.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.30.0.html">BDE 3.30.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.30.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.30.0.html#bde-3-30-0-highlights">BDE 3.30.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.29.0.html">BDE 3.29.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.29.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.29.0.html#bde-3-29-0-highlights">BDE 3.29.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.28.0.html">BDE 3.28.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.28.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.28.0.html#bde-3-28-0-highlights">BDE 3.28.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.27.0.html">BDE 3.27.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.27.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.27.0.html#bde-3-27-0-highlights">BDE 3.27.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.26.0.html">BDE 3.26.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.26.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.26.0.html#bde-3-26-0-highlights">BDE 3.26.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.25.0.html">BDE 3.25.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.25.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.25.0.html#bde-3-25-0-highlights">BDE 3.25.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.24.0.html">BDE 3.24.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.24.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.24.0.html#bde-3-24-0-highlights">BDE 3.24.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.23.1.html">BDE 3.23.1: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.23.1.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.23.1.html#bde-3-23-1-highlights">BDE 3.23.1 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.21.0.html">BDE 3.21.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.21.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.21.0.html#bde-3-21-0-highlights">BDE 3.21.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.20.0.html">BDE 3.20.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.20.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.20.0.html#bde-3-20-0-highlights">BDE 3.20.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.19.0.html">BDE 3.19.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.19.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.19.0.html#bde-3-19-0-highlights">BDE 3.19.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.18.0.html">BDE 3.18.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.18.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.18.0.html#bde-3-18-0-highlights">BDE 3.18.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.17.0.html">BDE 3.17.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.17.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.17.0.html#bde-3-17-0-highlights">BDE 3.17.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.16.0.html">BDE 3.16.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.16.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.16.0.html#bde-3-16-0-highlights">BDE 3.16.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.15.0.html">BDE 3.15.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.15.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.15.0.html#bde-3-15-0-highlights">BDE 3.15.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.14.0.html">BDE 3.14.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.14.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.14.0.html#bde-3-14-0-highlights">BDE 3.14.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.13.0.html">BDE 3.13.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.13.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.13.0.html#bde-3-13-0-highlights">BDE 3.13.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.12.0.html">BDE 3.12.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.12.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.12.0.html#bde-3-12-0-highlights">BDE 3.12.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.11.0.html">BDE 3.11.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.11.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.11.0.html#bde-3-11-0-highlights">BDE 3.11.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.10.0.html">BDE 3.10.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.10.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.10.0.html#bde-3-10-0-highlights">BDE 3.10.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.9.0.html">BDE 3.9.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.9.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.9.0.html#bde-3-9-0-highlights">BDE 3.9.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.8.0.html">BDE 3.8.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.8.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.8.0.html#bde-3-8-0-highlights">BDE 3.8.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.7.1.html">BDE 3.7.1: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.7.1.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.7.1.html#bde-3-7-1-highlights">BDE 3.7.1 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.7.0.html">BDE 3.7.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.7.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.7.0.html#bde-3-7-0-highlights">BDE 3.7.0 Highlights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/archive/BDE_3.6.0.html">BDE 3.6.0: Production Release</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.6.0.html#schedule">Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/archive/BDE_3.6.0.html#bde-3-6-0-highlights">BDE 3.6.0 Highlights</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Knowledge Base</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../knowledge_base/coding_standards.html">BDE C++ Coding Standards</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#introduction">1 Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#units-of-release">2 Units of Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#package-groups">2.1 Package Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#standalone-packages">2.2 Standalone Packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#components">3 Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#physical-design">3.1 Physical Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#logical-design">3.2 Logical Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#namespaces">3.3 Namespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#general-naming-conventions">3.4 General Naming Conventions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#header-files">4 Header Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#general-organization">4.1 General Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#prologue">4.2 Prologue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#include-directives">4.3 Include Directives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#declarations">4.4 Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#inline-definitions">4.5 Inline Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#epilogue">4.6 Epilogue</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#implementation-files">5 Implementation Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#class-definitions">6 Class Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#general-form">6.1 General Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#sections">6.2 Sections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#types-sections">6.3 Types Sections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#types-section-rules-specific-to-enumerations">6.4 Types Section Rules Specific to Enumerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#data-section">6.5 Data Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#friends-section">6.6 Friends Section</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#method-sections">6.7 Method Sections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#method-definitions">6.8 Method Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#free-operators">6.9 Free Operators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#method-design-and-implementation">7 Method Design and Implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#naming-conventions">7.1 Naming Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#interface-conventions">7.2 Interface Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#function-signatures">7.3 Function Signatures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#special-rules-for-creators">7.4 Special Rules for Creators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#component-level-documentation">8 Component-Level Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#comment-fields">8.1 Comment Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#description">8.2 Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#usage">8.3 Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#class-level-documentation">9 Class-Level Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#class-nomenclature">9.1 Class Nomenclature</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#thread-safety">9.2 Thread Safety</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#exception-safety">9.3 Exception Safety</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#alias-safety">9.4 Alias Safety</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#function-level-documentation">10 Function-Level Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#what-the-function-does">10.1 What the Function Does</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#what-the-function-returns">10.2 What the Function Returns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#more-about-essential-behavior">10.3 More About Essential Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#undefined-behavior">10.4 Undefined Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#note-that">10.5 Note That</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#typographical-conventions">11 Typographical Conventions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#source-file-mechanics">11.1 Source File Mechanics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#variable-declarations">11.2 Variable Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#alignment-for-variable-declarations">11.3 Alignment for Variable Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#variable-documentation">11.4 Variable Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#preprocessor-usage">11.5 Preprocessor Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#mid-function-returns">11.6 Mid-Function Returns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#formatting-logical-statements">11.7 Formatting Logical Statements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#markup">12 Markup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#basic-markup">12.1 Basic Markup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#displays">12.2 Displays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#headings">12.3 Headings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#links">12.4 Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#deprecation">13 Deprecation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#general-meaning">13.1 General Meaning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#section-13-2">13.2 Markup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#appendix-1-obsolete-rules">14 Appendix 1: Obsolete Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/coding_standards.html#appendix-2-rationale">15 Appendix 2: Rationale</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/coding_standards.html#r-7-3-rationale-function-signatures">R.7.3 Rationale: Function Signatures</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge_base/feature_index.html">Feature Index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#allocators">Allocators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#date-and-time">Date and Time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/feature_index.html#calendars">Calendars</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/feature_index.html#current-date-and-time">Current Date and Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/feature_index.html#id2">Date and Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/feature_index.html#time-zones">Time Zones</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/feature_index.html#timing">Timing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/feature_index.html#conversions">Conversions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#decimal-floating-point">Decimal Floating-Point</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#defensive-programming">Defensive Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#encodings-hashings">Encodings &amp; Hashings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#function-abstractions">Function Abstractions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#glossary-of-bde-terminology">Glossary of BDE Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#logging-and-metrics">Logging and Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#messaging">Messaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#miscellaneous">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#os-operations">OS Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#parsing">Parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#smart-pointers">Smart Pointers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#stack-traces-stack-recording-allocator">Stack Traces &amp; Stack-Recording Allocator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#test-apparatus">Test Apparatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#threads">Threads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/feature_index.html#traits">Traits</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../white_papers/index.html">White Papers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../white_papers/embracing_modern_cpp_safely.html">Embracing Modern C++ Safely</a></li>
<li class="toctree-l2"><a class="reference internal" href="../white_papers/contracts_ub_and_defensive_programming.html">Contracts, Undefined Behavior, and Defensive Programming</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Articles</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Avoiding Common Problems with Smart Pointers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://bloomberg.github.io/bde-resources/pdfs/BDETypeTaxonomy.pdf">Taxonomy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge_base/faq.html">BDE FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge_base/contributing.html">Contributing to BDE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/contributing.html#where-is-the-bde-source-code">Where is the BDE Source Code?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/contributing.html#basic-requirements-for-a-contribution">Basic Requirements for a Contribution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/contributing.html#bde-development-workflow">BDE Development Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/contributing.html#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/contributing.html#how-do-i-build-and-test-a-fix">How Do I Build and Test a Fix?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/contributing.html#how-do-i-contribute-a-simple-bug-fix-or-documentation-change">How Do I Contribute a Simple Bug Fix or Documentation Change?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/contributing.html#how-do-i-contribute-a-new-feature-component-or-package">How Do I Contribute a New Feature, Component, or Package?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knowledge_base/contributing.html#road-map">Road Map</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/contributing.html#proposal">Proposal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/contributing.html#development">Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/contributing.html#review">Review</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledge_base/contributing.html#release">Release</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://bloomberg.github.io/bde-tools">CMake Build System</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BDE Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Articles</a> &raquo;</li>
        
      <li>Avoiding Common Problems with Smart Pointers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="../knowledge_base/faq.html" class="btn btn-neutral float-right" title="BDE FAQ" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Articles" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p><em>Dec 17, 2019</em></p>
<div class="section" id="avoiding-common-problems-with-smart-pointers">
<span id="avoiding-common-problems-with-smart-pointers"></span><span id="mpcheck-top"></span><h1>Avoiding Common Problems with Smart Pointers<a class="headerlink" href="#avoiding-common-problems-with-smart-pointers" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Incorrectly passing allocators when creating or resetting smart pointers
(<code class="docutils literal notranslate"><span class="pre">bslma::ManagedPtr</span></code> and <code class="docutils literal notranslate"><span class="pre">bsl::shared_ptr</span></code>) is the most common mistake made
when using those pointers.</p>
<p>We have added checks to <code class="docutils literal notranslate"><span class="pre">bde_verify</span></code> to detect patterns of misuse and we have
created utility methods to encapsulate passing allocators properly when
creating smart pointer objects.</p>
<p><strong>We recommend using the utility methods</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bslma</span><span class="p">::</span><span class="n">ManagedPtrUtil</span><span class="p">::</span><span class="n">makeManaged</span>
<span class="n">bslma</span><span class="p">::</span><span class="n">ManagedPtrUtil</span><span class="p">::</span><span class="n">allocateManaged</span>
<span class="n">bsl</span><span class="p">::</span><span class="n">make_shared</span>
<span class="n">bsl</span><span class="p">::</span><span class="n">allocate_shared</span>
</pre></div>
</div>
<p>to create smart pointer objects instead of doing so “by hand”.</p>
</div>
<div class="section" id="creating-a-managed-pointer">
<span id="creating-a-managed-pointer"></span><h2>Creating a Managed Pointer<a class="headerlink" href="#creating-a-managed-pointer" title="Permalink to this headline">¶</a></h2>
<p>In full-blown usage, the creation of a managed pointer can involve
three mentions of an allocator.  A typical such case might be -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">foo</span><span class="p">(</span><span class="n">bslma</span><span class="p">::</span><span class="n">Allocator</span> <span class="o">*</span><span class="n">theAllocator</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span> <span class="o">...</span>
    <span class="n">bslma</span><span class="p">::</span><span class="n">ManagedPtr</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">smp</span><span class="p">(</span>       <span class="o">//</span> <span class="mi">0</span>
        <span class="n">new</span> <span class="p">(</span><span class="o">*</span><span class="n">theAllocator</span><span class="p">)</span>                   <span class="o">//</span> <span class="mi">1</span>
        <span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">theAllocator</span><span class="p">),</span>  <span class="o">//</span> <span class="mi">2</span>
        <span class="n">theAllocator</span><span class="p">);</span>                        <span class="o">//</span> <span class="mi">3</span>
    <span class="o">//</span> <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We discuss each appearance of the allocator below in
<a class="reference external" href="#understanding-smart-pointer-construction-and-its-discontents">understanding smart pointer construction</a>.</p>
</div>
<div class="section" id="possibilities-for-error">
<span id="possibilities-for-error"></span><h2>Possibilities for Error<a class="headerlink" href="#possibilities-for-error" title="Permalink to this headline">¶</a></h2>
<p>Whenever the same thing needs to be repeated multiple times,
there is always the possibility of error.</p>
<p>In the case of managed pointer usage, all three allocator
arguments are optional, so erroneous usage may include leaving
out arguments that should have been supplied, causing the default
allocator instead of the supplied allocator to be used.  And since
the supplied allocator very often is the default allocator, such
misuse can go unnoticed for a long time.</p>
</div>
<div class="section" id="bde-verify-checks">
<span id="bde-verify-checks"></span><h2><code class="docutils literal notranslate"><span class="pre">bde_verify</span></code> Checks<a class="headerlink" href="#bde-verify-checks" title="Permalink to this headline">¶</a></h2>
<p>As of version 1.3.12, <code class="docutils literal notranslate"><span class="pre">bde_verify</span></code> contains a check named <code class="docutils literal notranslate"><span class="pre">managed-pointer</span></code>
which attempts to identify possible errors in smart pointer construction
(for both <code class="docutils literal notranslate"><span class="pre">ManagedPtr</span></code> and <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code>, despite the name of the check) and
reset.  They’re described in more
<a class="reference external" href="#details-of-the-bde_verify-managed-ptr-check">detail below</a>, but in summary,
the’re tagged <code class="docutils literal notranslate"><span class="pre">MP01</span></code>, <code class="docutils literal notranslate"><span class="pre">MP02</span></code>, … and they detect mismatched allocator use.</p>
<p>To run only this check, use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">bde_verify</span> <span class="o">-</span><span class="n">cl</span><span class="o">=</span><span class="s1">&#39;all off&#39;</span> <span class="o">-</span><span class="n">cl</span><span class="o">=</span><span class="s1">&#39;check managed-pointer on&#39;</span> <span class="n">files</span><span class="o">...</span>
</pre></div>
</div>
<p>See the <code class="docutils literal notranslate"><span class="pre">bde_verify</span></code>
<a class="reference external" href="https://bde.bloomberg.com/bde-verify/main.html#synopsis">documentation</a>
for more detail.</p>
</div>
<div class="section" id="avoid-errors-by-using-utilities">
<span id="avoid-errors-by-using-utilities"></span><h2>Avoid Errors by Using Utilities<a class="headerlink" href="#avoid-errors-by-using-utilities" title="Permalink to this headline">¶</a></h2>
<p><strong>BDE 3.44</strong> provides new utility methods for creating managed pointers.
Similar utility methods for shared pointers previously existed.  These methods
encapsulate object creation and the passing of allocators so that the
allocator argument does not need to be repeated,  The methods come in pairs,
a <code class="docutils literal notranslate"><span class="pre">make</span></code> variant that uses the default allocator and an <code class="docutils literal notranslate"><span class="pre">allocate</span></code> variant that
takes a specified allocator.</p>
<p>The example above becomes -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">bslma</span><span class="p">::</span><span class="n">ManagedPtr</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">smp</span> <span class="o">=</span>
        <span class="n">bslma</span><span class="p">::</span><span class="n">ManagedPtrUtil</span><span class="p">::</span><span class="n">allocateManaged</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span>
            <span class="n">theAllocator</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>If we were creating a shared pointer instead of a managed pointer,
we would say -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">bsl</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">ssp</span> <span class="o">=</span>
        <span class="n">bsl</span><span class="p">::</span><span class="n">allocate_shared</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="n">theAllocator</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Note that we pass the allocator <em>first</em>, followed by the arguments to the
object constructor.  The utility functions query traits of the object type to
determine whether the object uses allocators, and if so, forward the allocator
to the constructor of the object as the last argument.</p>
<p>If we want to use the default allocator, we can say -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">bslma</span><span class="p">::</span><span class="n">ManagedPtr</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">smp</span> <span class="o">=</span>
        <span class="n">bslma</span><span class="p">::</span><span class="n">ManagedPtrUtil</span><span class="p">::</span><span class="n">makeManaged</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">);</span>
    <span class="n">bsl</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">ssp</span> <span class="o">=</span> <span class="n">bsl</span><span class="p">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="understanding-smart-pointer-construction-and-its-discontents">
<span id="understanding-smart-pointer-construction-and-its-discontents"></span><h2>Understanding Smart Pointer Construction and Its Discontents<a class="headerlink" href="#understanding-smart-pointer-construction-and-its-discontents" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creating-managed-and-shared-pointers">
<span id="creating-managed-and-shared-pointers"></span><h3>Creating Managed and Shared Pointers<a class="headerlink" href="#creating-managed-and-shared-pointers" title="Permalink to this headline">¶</a></h3>
<p>Here is the code for smart pointer creation, once again -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">foo</span><span class="p">(</span><span class="n">bslma</span><span class="p">::</span><span class="n">Allocator</span> <span class="o">*</span><span class="n">theAllocator</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span> <span class="o">...</span>
    <span class="n">bslma</span><span class="p">::</span><span class="n">ManagedPtr</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">smp</span><span class="p">(</span>            <span class="o">//</span> <span class="mi">0</span>
        <span class="n">new</span> <span class="p">(</span><span class="o">*</span><span class="n">theAllocator</span><span class="p">)</span>                        <span class="o">//</span> <span class="mi">1</span>
        <span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">theAllocator</span><span class="p">),</span>       <span class="o">//</span> <span class="mi">2</span>
        <span class="n">theAllocator</span><span class="p">);</span>                             <span class="o">//</span> <span class="mi">3</span>
    <span class="o">//</span> <span class="o">...</span>
    <span class="n">bsl</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">ssp</span><span class="p">(</span>              <span class="o">//</span> <span class="mi">0</span>
        <span class="n">new</span> <span class="p">(</span><span class="o">*</span><span class="n">theAllocator</span><span class="p">)</span>                        <span class="o">//</span> <span class="mi">1</span>
        <span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">theAllocator</span><span class="p">),</span>       <span class="o">//</span> <span class="mi">2</span>
        <span class="n">theAllocator</span><span class="p">);</span>                             <span class="o">//</span> <span class="mi">3</span>
    <span class="o">//</span> <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="resetting-managed-and-shared-pointers">
<span id="resetting-managed-and-shared-pointers"></span><h3>Resetting Managed and Shared Pointers<a class="headerlink" href="#resetting-managed-and-shared-pointers" title="Permalink to this headline">¶</a></h3>
<p>Resetting a managed pointer is similar -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">bar</span><span class="p">(</span><span class="n">bslma</span><span class="p">::</span><span class="n">ManagedPtr</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;&amp;</span>  <span class="n">smp</span><span class="p">,</span>
         <span class="n">bsl</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;&amp;</span>    <span class="n">ssp</span><span class="p">,</span>
         <span class="n">baslma</span><span class="p">::</span><span class="n">Allocator</span>               <span class="o">*</span><span class="n">theAllocator</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span> <span class="o">...</span>
    <span class="n">smp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">new</span> <span class="p">(</span><span class="o">*</span><span class="n">theAllocator</span><span class="p">)</span>                    <span class="o">//</span> <span class="mi">1</span>
             <span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">theAllocator</span><span class="p">),</span>   <span class="o">//</span> <span class="mi">2</span>
             <span class="n">theAllocator</span><span class="p">);</span>                         <span class="o">//</span> <span class="mi">3</span>
    <span class="o">//</span> <span class="o">...</span>
    <span class="n">ssp</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">new</span> <span class="p">(</span><span class="o">*</span><span class="n">theAllocator</span><span class="p">)</span>                   <span class="o">//</span> <span class="mi">1</span>
              <span class="n">bsl</span><span class="p">::</span><span class="n">string</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">theAllocator</span><span class="p">),</span>  <span class="o">//</span> <span class="mi">2</span>
              <span class="n">theAllocator</span><span class="p">);</span>                        <span class="o">//</span> <span class="mi">3</span>
    <span class="o">//</span> <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-allocator-arguments">
<span id="the-allocator-arguments"></span><h3>The Allocator Arguments<a class="headerlink" href="#the-allocator-arguments" title="Permalink to this headline">¶</a></h3>
<p>At line 0 we create a smart pointer to string.</p>
<p>At line 1, we issue the <code class="docutils literal notranslate"><span class="pre">new</span></code> expression to allocate the string
that will be held by the managed pointer, passing it the
placement argument <code class="docutils literal notranslate"><span class="pre">(*theAllocator)</span></code> so that it will use the
specified allocator to allocate memory for the string.</p>
<p>At line 2, we pass the allocator to the string constructor so
that the string will use that allocator for its internal memory
allocation; the fact that the string itself was allocated using
a particular allocator does not automatically forward that
allocator to the string.  Without this argument, the string would
use the default allocator for its internal allocations.</p>
<p>Finally, at line 3 we pass the allocator to the managed pointer
constructor to use as the means for deallocating the held string.
Deallocation must match allocation; since memory for the held string
came from <code class="docutils literal notranslate"><span class="pre">theAllocator</span></code> (at line 1), we must use <code class="docutils literal notranslate"><span class="pre">theAllocator</span></code> to
free that memory.</p>
</div>
<div class="section" id="consequences-of-omission-or-mismatch">
<span id="consequences-of-omission-or-mismatch"></span><h3>Consequences of Omission or Mismatch<a class="headerlink" href="#consequences-of-omission-or-mismatch" title="Permalink to this headline">¶</a></h3>
<p>Leaving out the allocator at line 2, or using a different one, is
the least pernicious.  It results in the string using a different
allocator from the one used to allocate the string.  This is not an
error per se, but it may lead to inefficiency by failing to take
advantage of the presumably more performant supplied allocator.</p>
<p>Leaving out the placement argument at line 1 or the deleter argument
at line 3 is the most troublesome, since it implies that the wrong
method will be used to deallocate memory.  However, the default allocator,
unless reset, allocates and frees memory using <code class="docutils literal notranslate"><span class="pre">operator</span> <span class="pre">new</span></code> and
<code class="docutils literal notranslate"><span class="pre">operator</span> <span class="pre">delete</span></code>, so omitting one of line 1 and line 3 can still result in
code that “works” until a non-default allocator is supplied.</p>
<p>And obviously, actual mismatches between line 1 and line 3 will cause
errors if the deleter attempts to free memory in a way inconsistent
with how the allocator supplied it.</p>
</div>
</div>
<div class="section" id="details-of-the-bde-verify-managed-ptr-check">
<span id="details-of-the-bde-verify-managed-ptr-check"></span><h2>Details of the <code class="docutils literal notranslate"><span class="pre">bde_verify</span></code> <code class="docutils literal notranslate"><span class="pre">managed-ptr</span></code> Check<a class="headerlink" href="#details-of-the-bde-verify-managed-ptr-check" title="Permalink to this headline">¶</a></h2>
<p>Examples of the output it produces follow -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span> <span class="n">warning</span><span class="p">:</span> <span class="n">MP01</span><span class="p">:</span> <span class="n">Shared</span> <span class="n">pointer</span> <span class="n">without</span> <span class="n">deleter</span>
      <span class="n">will</span> <span class="n">use</span> <span class="s1">&#39;operator delete&#39;</span>
    <span class="n">ManagedPtr</span><span class="o">&lt;</span><span class="n">char</span><span class="o">&gt;</span> <span class="n">mp02</span><span class="p">(</span><span class="n">new</span> <span class="p">(</span><span class="o">*</span><span class="n">pa</span><span class="p">)</span> <span class="n">char</span><span class="p">);</span>
                     <span class="o">^</span>    <span class="o">~~~~~~~~~~~~~~</span>

<span class="n">file</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">72</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span> <span class="n">warning</span><span class="p">:</span> <span class="n">MP02</span><span class="p">:</span> <span class="n">Different</span> <span class="n">allocator</span> <span class="ow">and</span> <span class="n">deleter</span>
      <span class="k">for</span> <span class="n">shared</span> <span class="n">pointer</span>
    <span class="n">ManagedPtr</span><span class="o">&lt;</span><span class="n">char</span><span class="o">&gt;</span> <span class="n">ep03</span><span class="p">(</span><span class="n">new</span> <span class="p">(</span><span class="n">ta</span><span class="p">)</span> <span class="n">char</span><span class="p">,</span> <span class="n">ba</span><span class="p">);</span>
                     <span class="o">^</span>         <span class="o">~~</span>        <span class="o">~~</span>

<span class="n">file</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span> <span class="n">warning</span><span class="p">:</span> <span class="n">MP03</span><span class="p">:</span> <span class="n">Deleter</span> <span class="n">provided</span> <span class="k">for</span> <span class="n">non</span><span class="o">-</span><span class="n">placement</span>
      <span class="n">allocation</span> <span class="k">for</span> <span class="n">shared</span> <span class="n">pointer</span>
    <span class="n">ManagedPtr</span><span class="o">&lt;</span><span class="n">char</span><span class="o">&gt;</span> <span class="n">ep01</span><span class="p">(</span><span class="n">new</span> <span class="n">char</span><span class="p">,</span> <span class="n">da</span><span class="p">);</span>
                     <span class="o">^</span>    <span class="o">~~~~~~~~</span>  <span class="o">~~</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bde_verify</span></code> attempts to detect if an allocator variable has been initialized
to the default allocator explicitly, and if so issues a gentler warning, off
by default -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span> <span class="n">warning</span><span class="p">:</span> <span class="n">MPOK01</span><span class="p">:</span> <span class="n">Shared</span> <span class="n">pointer</span> <span class="n">without</span> <span class="n">deleter</span>
      <span class="n">using</span> <span class="n">default</span><span class="o">-</span><span class="n">initialized</span> <span class="n">allocator</span> <span class="n">variable</span>
    <span class="n">ManagedPtr</span><span class="o">&lt;</span><span class="n">char</span><span class="o">&gt;</span> <span class="n">mp04</span><span class="p">(</span><span class="n">new</span> <span class="p">(</span><span class="o">*</span><span class="n">da</span><span class="p">)</span> <span class="n">char</span><span class="p">);</span>
                     <span class="o">^</span>         <span class="o">~~~</span>
<span class="n">file</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span> <span class="n">note</span><span class="p">:</span> <span class="n">MPOK01</span><span class="p">:</span> <span class="n">Initialization</span> <span class="ow">is</span> <span class="n">here</span>
    <span class="n">bslma</span><span class="p">::</span><span class="n">Allocator</span>     <span class="o">*</span><span class="n">da</span> <span class="o">=</span> <span class="n">bslma</span><span class="p">::</span><span class="n">Default</span><span class="p">::</span><span class="n">allocator</span><span class="p">();</span>
                          <span class="o">^</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Bloomberg LP.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>